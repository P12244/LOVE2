*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family: 'Segoe UI', sans-serif;
}

:root{
  --pink-1: #ff9ecf;
  --pink-2: #ff4fa3;
  --bg-accent: #ffd1e8;
}

/* Fullscreen centered layout for mobile-first one-screen experience */
body{
  background: linear-gradient(135deg,var(--pink-1),var(--pink-2));
  height:100vh;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  padding:20px;
}

/* HERO */
.hero{
  text-align:center;
  transition:0.8s ease;
  width:100%;
  max-width:420px;
}

.title{
  font-size:clamp(18px,4.5vw,30px);
  margin-bottom:18px;
  line-height:1.1;
}

.heart-wrapper{
  position:relative;
  width:150px;
  height:150px;
  margin:10px auto;
  cursor:pointer;
  animation:float 3s ease-in-out infinite;
  touch-action:manipulation;
  border-radius:18px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.heart{
  width:100%;
  height:100%;
  background:#fff;
  /* Use an SVG clip-path fallback via mask for broader support */
  mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path d="M75 125 L24 74 A28 28 0 1 1 75 38 A28 28 0 1 1 126 74 Z" fill="black"/></svg>');
  -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path d="M75 125 L24 74 A28 28 0 1 1 75 38 A28 28 0 1 1 126 74 Z" fill="black"/></svg>') center/contain no-repeat;
  transition:0.25s ease;
  box-shadow: 0 8px 20px rgba(0,0,0,0.18), inset 0 -6px 18px rgba(0,0,0,0.06);
}

.percent{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-weight:700;
  color:var(--pink-2);
  font-size:18px;
  text-shadow: 0 1px 0 rgba(255,255,255,0.6);
  pointer-events:none;
}

.loading-wrapper{
  width:200px;
  height:8px;
  background:var(--bg-accent);
  margin:18px auto 8px;
  border-radius:20px;
  overflow:hidden;
}

.loading-bar{
  height:100%;
  width:0%;
  background:white;
  transition:0.18s linear;
}

/* Reveal Section */
.reveal{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  opacity:0;
  pointer-events:none;
  transition:0.6s ease;
  padding:20px;
}

.card{
  background:white;
  color:var(--pink-2);
  padding:18px;
  border-radius:16px;
  box-shadow:0 15px 40px rgba(0,0,0,0.18);
  text-align:center;
  width:100%;
  max-width:360px;
  transform:translateY(6px);
  animation:fadeUp 0.9s ease forwards;
}

.card img{
  width:100%;
  border-radius:12px;
  margin-bottom:12px;
  display:block;
}

/* Sparkles & Petals */
#sparkle-container{
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}

#petal-container{
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}

/* Burst pieces container */
#burst-container{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:visible;
}

/* small heart-petal pieces for burst */
.petal-burst{
  position:absolute;
  width:12px;
  height:12px;
  background:var(--pink-2);
  /* approximate little heart shape with clip-path triangle+circle-ish path fallback */
  clip-path: path("M6 11 L1 6 A2.5 2.5 0 1 1 6 3 A2.5 2.5 0 1 1 11 6 Z");
  border-radius:2px;
  transform-origin:center;
  animation:burst 1000ms ease-out forwards;
  box-shadow:0 6px 10px rgba(0,0,0,0.06);
}

/* burst movement uses CSS variables --x and --y set from JS */
@keyframes burst{
  0%{
    transform:translate(0,0) scale(1) rotate(0deg);
    opacity:1;
  }
  100%{
    transform:translate(var(--x), var(--y)) scale(0.5) rotate(360deg);
    opacity:0;
  }
}

/* floating 100% number */
.percent.float-up{
  animation:numberRise 1000ms cubic-bezier(.22,.9,.3,1) forwards;
}

@keyframes numberRise{
  0%{
    transform:translate(-50%,-50%) scale(1);
    opacity:1;
  }
  100%{
    transform:translate(-50%,-120px) scale(1.3);
    opacity:0;
  }
}

.sparkle{
  position:absolute;
  font-size:14px;
  animation:floatUp 1.8s linear forwards;
  will-change:transform,opacity;
  opacity:0;
  user-select:none;
}

/* Petal */
.petal{
  position:absolute;
  font-size:18px;
  will-change:transform,opacity;
  animation:fall linear forwards;
  pointer-events:none;
  filter:drop-shadow(0 6px 10px rgba(0,0,0,0.08));
  transform-origin:center;
}

@keyframes fall{
  0%{
    transform:translateY(-10vh) rotate(0deg);
    opacity:1;
  }
  100%{
    transform:translateY(110vh) rotate(360deg);
    opacity:0;
  }
}

/* Animations */
@keyframes float{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-10px);}
}

@keyframes floatUp{
  0%{transform:translateY(0) scale(0.9); opacity:1;}
  70%{opacity:1;}
  100%{transform:translateY(-120px) scale(0.6); opacity:0;}
}

@keyframes fadeUp{
  from{opacity:0; transform:translateY(24px);}
  to{opacity:1; transform:translateY(0);}
}

/* Interaction feedback */
.heart-wrapper:active .heart{
  transform:scale(0.98);
  filter:brightness(0.98);
}

/* Cinematic blur when revealing */
.hero.blur{
  filter: blur(10px);
  transform: scale(1.05);
  transition: filter 0.9s ease, transform 0.9s ease, opacity 0.6s ease;
}

/* Responsive */
@media (min-width:768px){
  .heart-wrapper{
    width:200px;
    height:200px;
  }
  .title{font-size:clamp(22px,3vw,34px);}
}

/* Floating music player (bottom-center) */
.music-player{
  position:fixed;
  left:50%;
  bottom:24px;
  transform:translateX(-50%);
  display:none;
  align-items:center;
  gap:12px;
  background:rgba(255,255,255,0.98);
  padding:12px 18px;
  border-radius:14px;
  box-shadow:0 20px 50px rgba(0,0,0,0.25);
  cursor:pointer;
  z-index:1000;
  transition:0.22s transform ease, 0.22s box-shadow ease, 0.22s opacity;
  min-height:48px;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  will-change:transform,opacity;
}

.music-player:active{ transform:translateX(-50%) scale(0.98); }

.music-player:hover{
  transform:translateX(-50%) scale(1.03);
}

.music-disc{
  width:44px;
  height:44px;
  border-radius:50%;
  background:var(--pink-2);
  display:flex;
  align-items:center;
  justify-content:center;
  color:white;
  font-size:18px;
  flex:0 0 44px;
  box-shadow:0 6px 18px rgba(0,0,0,0.12) inset;
}

.music-disc.spin{
  animation:rotateDisc 3s linear infinite;
}

@keyframes rotateDisc{
  from{ transform:rotate(0deg); }
  to{ transform:rotate(360deg); }
}

.music-info{
  color:var(--pink-2);
  font-weight:700;
  font-size:15px;
  overflow:hidden;
  max-width:220px;
  text-align:left;
}

.song-title{
  white-space:nowrap;
  text-overflow:ellipsis;
  overflow:hidden;
}

/* ensure accessible hit area on mobile: bottom-center, slightly smaller */
@media (max-width:480px){
  .music-player{
    left:50%;
    bottom:18px;
    transform:translateX(-50%);
    padding:10px 12px;
    gap:10px;
    min-height:44px;
  }
  .music-info{ max-width:140px; font-size:13px; }
  .music-disc{ width:36px; height:36px; font-size:16px; flex:0 0 36px; }
}